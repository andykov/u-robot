include ../mixins/svg-icon.pug
include ../mixins/column-text.pug

doctype html
html(lang="ru-RU")
	head
		meta(name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no")
		title
			block title
		link(rel="stylesheet" href="css-new/libs/aos.css")
		link(rel="stylesheet" href="css-new/libs/slick.css")
		link(rel="stylesheet" href="css-new/global.css")

		block css

	body

		//- include ../../blocks/header/header

		main.layout
			block content

		footer.footer
			block footer
		
		<!-- scripts -->
		script(src="js/libs/jquery-3.3.1.min.js")
		script(src="js/libs/aos.js")
		script(src="js/libs/slick.min.js")
		script(src="js/template.js")
		script.
			$(function() {
				var allVideos = $("iframe[src^='//player.vimeo.com'], iframe[src^='//www.youtube.com'], object, embed"),
					fluidEl = $("figure");
					console.log(allVideos);
				allVideos.each(function() {
					$(this)
						// jQuery .data does not work on object/embed elements
						.attr('data-aspectRatio', this.height / this.width)
						.removeAttr('height')
						.removeAttr('width');
				});
				$(window).resize(function() {
					console.log('1111');
					var newWidth = fluidEl.width();
					allVideos.each(function() {
				
						var elel = $(this);
						elel
							.width(newWidth)
							.height(newWidth * elel.attr('data-aspectRatio'));
				
					});
				}).resize();
			});


